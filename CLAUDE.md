## プロジェクト概要：サイト構造解析ツール

### 🎯 目的

* サイト構造を自動解析し、人力での調査負担を軽減し、重要なページを効率よく抽出する。

### 🔧 現状の課題

* サイト構造の全体像やサブドメイン含めた画面一覧の取得が人力で大きな負荷。
* 特に「URLが変わらない」動的画面遷移（JS/Ajaxなど）や、サブドメインのページが把握しづらい。

### 👤 対象ユーザー

* サイト構造の調査や分析を行う業務担当者（例：デザイナー、PDM、マーケター）

### 📥 入力

* ユーザーが対象URL（例：`https://example.com`）を入力

### 📤 出力

* 一覧表（GUI上に表示＆CSVなどでDL）

  * URL
  * 推定される重要度（スコア）

### 📌 定義上の「重要な画面」とは

* ① ユーザー行動上、閲覧される可能性が高いもの
* ② 事業上のKPIに関わるもの（例：会員登録・資料請求など）

### 🌐 対象範囲

| 項目       | 対象 | 備考                      |
| -------- | -- | ----------------------- |
| サブドメイン   | ✅  | `help.example.com` など含む |
| 外部ドメイン   | ❌  | YouTubeなどは除外            |
| JS動的ページ  | ✅  | Puppeteerで対応            |
| ログイン後ページ | ❌  | 対象外とする                  |

---

## 要件定義②：機能要件（確定）

| カテゴリ | 機能名         | 説明                                        | 優先度 |
| ---- | ----------- | ----------------------------------------- | --- |
| 入力   | URL入力       | GUIでURLを指定                                | 必須  |
| クロール | サイト構造クロール   | サブドメイン含めた探索                               | 必須  |
|      | JSレンダリング処理  | SPAなどの遷移ページ対応                             | 必須  |
|      | ページ数制御      | 一定深度で停止、続行確認                              | 必須  |
| 分析   | 重要度スコアリング   | 以下でスコア推定：リンク数、深度、URL構造（Must）、行動推定（Better） | 必須  |
| 出力   | 表形式可視化      | 結果を表で表示・ソート                               | 必須  |
|      | CSVダウンロード   | 表結果をCSV出力                                 | 必須  |
| 補助   | サブドメイン検出    | 同一ドメイン内の別サブドメインも対象                        | 必須  |
|      | 外部ドメイン除外    | 外部リンクを除外                                  | 必須  |
|      | 遷移元調査（後回し可） | ページにどう到達できるかを表示                           | 任意  |

---

## 基本設計：構成案（確定）

### 🧱 アーキテクチャ

```
Next.js（GUI） → FastAPI（API） → Puppeteer（クローラー）
                               ↓
                         JSON一時保存 → 表形式表示・CSV出力
```

### 技術スタック

| レイヤ    | 技術                     | 理由                 |
| ------ | ---------------------- | ------------------ |
| フロント   | Next.js + Tailwind CSS | UIの柔軟性・保守性高        |
| バックエンド | FastAPI                | Pythonベースで非同期処理に強い |
| クローラー  | Puppeteer              | JSページ対応・SPA遷移処理可能  |
| 出力     | JSON→CSV               | 軽量で柔軟、将来DBも可       |

### 処理方式・仕様

| 項目       | 設定        | 備考                |
| -------- | --------- | ----------------- |
| クローリング方式 | サーバー内逐次処理 | 軽量構成、初期用途に最適化     |
| 結果表示     | 完了後一括表示   | シンプルで負荷低          |
| ページ過多対応  | 深度制限＋通知   | 重要度の低いページは一時停止可能に |

---

## 今後のステップ案

* UI設計（入力画面・結果表示画面）
* 処理フロー設計（API→クローラー→整形→出力）
* ディレクトリ構成案（初期スケルトン）

必要に応じて、ワイヤーフレームや初期コード構成も作成可能